if (self.CavalryLogger) { CavalryLogger.start_js(["vTvFz"]); }

__d("CometAnimatedImagePickerSearchResultsRootQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"media_height"},b={defaultValue:null,kind:"LocalArgument",name:"media_width"},c={defaultValue:null,kind:"LocalArgument",name:"query_type"},d={defaultValue:null,kind:"LocalArgument",name:"result_types"},e={defaultValue:null,kind:"LocalArgument",name:"scale"},f={defaultValue:null,kind:"LocalArgument",name:"search_query"},g=[{kind:"Literal",name:"count",value:40},{kind:"Variable",name:"media_height",variableName:"media_height"},{kind:"Variable",name:"media_scale",variableName:"scale"},{kind:"Variable",name:"media_width",variableName:"media_width"},{kind:"Variable",name:"query",variableName:"search_query"},{kind:"Variable",name:"query_type",variableName:"query_type"},{kind:"Variable",name:"result_types",variableName:"result_types"}],h={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"size_bytes",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"duration_ms",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null};return{fragment:{argumentDefinitions:[a,b,c,d,e,f],kind:"Fragment",metadata:null,name:"CometAnimatedImagePickerSearchResultsRootQuery",selections:[{alias:null,args:g,concreteType:"MessengerPlatformResponse",kind:"LinkedField",name:"comet_external_media",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometAnimatedImagePickerSearchResults_results"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,d,f,b,a,e],kind:"Operation",name:"CometAnimatedImagePickerSearchResultsRootQuery",selections:[{alias:null,args:g,concreteType:"MessengerPlatformResponse",kind:"LinkedField",name:"comet_external_media",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerPlatformResultGroup",kind:"LinkedField",name:"result_group",plural:!0,selections:[{alias:null,args:null,concreteType:"MessengerPlatformResult",kind:"LinkedField",name:"results",plural:!0,selections:[{alias:null,args:null,concreteType:"MessengerPlatformSourceMedia",kind:"LinkedField",name:"source",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mime_type",storageKey:null},h,i,j,k,l,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gif_source",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MessengerPlatformMedia",kind:"LinkedField",name:"media",plural:!0,selections:[h,i,j,k,l,{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"app_fbid",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_next_cursor",storageKey:null}],storageKey:null}]},params:{id:"5072649306139292",metadata:{},name:"CometAnimatedImagePickerSearchResultsRootQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometAnimatedImagePickerSearchResults_results.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"size_bytes",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"duration_ms",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometAnimatedImagePickerSearchResults_results",selections:[{alias:null,args:null,concreteType:"MessengerPlatformResultGroup",kind:"LinkedField",name:"result_group",plural:!0,selections:[{alias:null,args:null,concreteType:"MessengerPlatformResult",kind:"LinkedField",name:"results",plural:!0,selections:[{alias:null,args:null,concreteType:"MessengerPlatformSourceMedia",kind:"LinkedField",name:"source",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mime_type",storageKey:null},a,b,c,d,e,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gif_source",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MessengerPlatformMedia",kind:"LinkedField",name:"media",plural:!0,selections:[a,b,c,d,e,{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"app_fbid",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_next_cursor",storageKey:null}],type:"MessengerPlatformResponse",abstractKey:null}}();e.exports=a}),null);
__d("CometPickerSearchBox.react",["fbt","ix","CometComponentWithKeyCommands.react","CometKeys","CometRoundedTextInput.react","TetraIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=i||b("react"),k={searchWrapper:{paddingTop:"cxgpxx05",paddingEnd:"hv4rvrfc",paddingBottom:"sj5x9vvc",paddingStart:"dati1w0a"}};function a(a){var c=a.searchQuery,d=a.setSearchQuery,e=j.useRef(null);j.useEffect(function(){var a=e.current;if(a==null)return;a.focus()},[]);a=[{command:{key:b("CometKeys").ENTER},description:g._("GIF search"),handler:function(){},triggerFromInputs:!0}];return j.jsx(b("CometComponentWithKeyCommands.react"),{commandConfigs:a,xstyle:k.searchWrapper,children:j.jsx(b("CometRoundedTextInput.react"),{"aria-expanded":!1,"aria-label":g._("GIF search"),autoComplete:"off",icon:j.jsx(b("TetraIcon.react"),{color:"tertiary",icon:b("fbicon")._(h("491282"),16),size:16}),label:String(g._("GIF search")),onChange:j.useCallback(function(a){a.target.value!==void 0&&d(a.target.value)},[d]),placeholder:g._("Search"),ref:e,role:"combobox",spellCheck:!1,type:"text",value:(a=c)!=null?a:""})})}}),null);
__d("CometAnimatedImagePickerSearchResult.react",["fbt","CometImage.react","CometPressable.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=h||b("react"),j=b("gkx")("1924962");function a(a){var c=a.desiredWidth,d=a.image,e=a.onSelect;a=i.useCallback(function(){return e(d)},[d,e]);var f=d.source.width,h=d.source.height;f=c/f;var k=j&&d.source.title!=null?d.source.title:g._("GIF");return i.jsx(b("CometPressable.react"),{onPress:a,overlayDisabled:!0,children:i.jsx(b("CometImage.react"),{alt:k,height:h*f,src:d.source.url,width:c})})}}),null);
__d("CometAnimatedImagePickerSearchResults.react",["fbt","CometAnimatedImagePickerSearchResult.react","CometAnimatedImagePickerSearchResults_results.graphql","CometPickerNullState.react","CometPickerScrollableArea.react","CometRelay","NullStateMedia","getJSEnumSafe","react"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i,j=i||b("react"),k=5;function a(a){var c,d,e=b("CometRelay").useFragment(h!==void 0?h:h=b("CometAnimatedImagePickerSearchResults_results.graphql"),a.results),f=(c=e==null?void 0:(c=e.result_group)==null?void 0:(c=c[0])==null?void 0:c.results.length)!=null?c:0;c=j.useState(k);var i=c[0],l=c[1];c=j.useCallback(function(){return l(function(a){return Math.min(a+k,f)})},[f]);d=e==null?void 0:(d=e.result_group[0])==null?void 0:(d=d.results[0])==null?void 0:d.result_id;var m=j.useState(null),n=m[0];m=m[1];n!==d&&(m(d),l(k));var o={ANIMATION:1,PHOTO:0,STICKER:3,VIDEO:2};if(!e||!e.result_group||e.result_group.length===0||!e.result_group[0])return j.jsx(b("CometPickerNullState.react"),{body:g._("No GIFs to show"),icon:b("NullStateMedia")});n=e.result_group[0].results;var p=e.result_next_cursor;m=n.map(function(c,d){var e,f=c.media[0],g=c.source;if(f==null||g==null)return;if(d>i)return null;f={preview:{durationMs:(d=f.duration_ms)!=null?d:0,height:(d=f.height)!=null?d:0,label:(d=f.label)!=null?d:null,sizeBytes:(d=f.size_bytes)!=null?d:0,url:(d=g.url)!=null?d:"",width:(d=f.width)!=null?d:0}};g={durationMs:(d=g.duration_ms)!=null?d:0,gifSource:(d=g.gif_source)!=null?d:null,height:(d=g.height)!=null?d:0,mimeType:(d=g.mime_type)!=null?d:"",sizeBytes:(d=g.size_bytes)!=null?d:0,title:(d=g.title)!=null?d:"",url:(d=g.url)!=null?d:"",width:(d=g.width)!=null?d:0};d=(d=c.result_type)!=null?d:"ANIMATION";return j.jsx(b("CometAnimatedImagePickerSearchResult.react"),{desiredWidth:a.desiredWidth,image:{cursor:(e=p)!=null?e:"",media:f,platformFBID:(e=c.app_fbid)!=null?e:"",resultID:(f=c.result_id)!=null?f:"",source:g,type:(e=b("getJSEnumSafe")(o,d))!=null?e:1},onSelect:a.onSelect},(f=c.result_id)!=null?f:void 0)});return j.jsx(b("CometPickerScrollableArea.react"),{horizontal:!1,onScrollBottom:c,scrollKey:a.scrollKey,xstyle:a.xstyle,children:m})}}),null);
__d("CometAnimatedImagePickerSearchResultsRoot.react",["CometAnimatedImagePickerSearchResults.react","CometAnimatedImagePickerSearchResultsRootQuery.graphql","CometErrorBoundary.react","CometRelay","WebPixelRatio","react","useInvalidNumberThrowsViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=h||b("react");function j(a){var c=a.mediaHeight,d=a.mediaWidth,e=a.onSelect,f=a.searchQuery;a=a.xstyle;b("useInvalidNumberThrowsViolation")(d);var h=i.useMemo(function(){return{media_height:c,media_width:d,query_type:f===""?"TRENDING":"SEARCH",result_types:["ANIMATION"],scale:b("WebPixelRatio").get(),search_query:f}},[c,d,f]),j=b("CometRelay").useLazyLoadQuery(g!==void 0?g:g=b("CometAnimatedImagePickerSearchResultsRootQuery.graphql"),h);return j.comet_external_media==null?null:i.jsx(b("CometAnimatedImagePickerSearchResults.react"),{desiredWidth:h.media_width,onSelect:e,results:j.comet_external_media,scrollKey:f,xstyle:a})}function a(a){return i.jsx(b("CometErrorBoundary.react"),{children:i.jsx(j,babelHelpers["extends"]({},a))})}}),null);
__d("CometAnimatedImagePickerCard.react",["CometAnimatedImagePickerSearchResultsRoot.react","react","useDebouncedValue"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){var c=a.mediaHeight,d=a.mediaWidth,e=a.onSelect,f=a.searchQuery;a=a.xstyle;return h.jsx(b("CometAnimatedImagePickerSearchResultsRoot.react"),{mediaHeight:c,mediaWidth:d,onSelect:e,searchQuery:b("useDebouncedValue")(f,200),xstyle:a})}}),null);
__d("CometPickerBasicStackingLayout.react",["CometColumn.react","CometColumnItem.react","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){var c=a.children,d=c.content,e=c.footer;c=c.header;var f=a.expanding,g=a.testid;g=a.xstyle;return h.jsxs(b("CometColumn.react"),{expanding:f,testid:void 0,xstyle:g,children:[h.jsx(b("CometColumnItem.react"),{children:c}),h.jsx(b("CometColumnItem.react"),{expanding:!0,children:d}),h.jsx(b("CometColumnItem.react"),{children:e})]})}}),null);
__d("CometUFIAnimatedImagePickerCard.react",["CometAnimatedImagePickerCard.react","CometColumn.react","CometColumnItem.react","CometPickerBasicStackingLayout.react","CometPickerSearchBox.react","CometPlaceholder.react","CometProgressIndicator.react","gkx","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react"),i=b("gkx")("1299319"),j=274,k={popover:{height:"j707pzvn",width:"hdkcmrsv"},scrollableAreaForIE11:{height:"sgwjjusx"}};function a(a){var c=a.onClose,d=a.onSelect;a=h.useCallback(function(a){c(),d(a)},[c,d]);var e=h.useState(""),f=e[0];e=e[1];return h.jsx(b("CometPickerBasicStackingLayout.react"),{xstyle:k.popover,children:{content:h.jsx(b("CometPlaceholder.react"),{fallback:h.jsx(b("CometColumn.react"),{align:"center",expanding:!0,verticalAlign:"center",children:h.jsx(b("CometColumnItem.react"),{children:h.jsx(b("CometProgressIndicator.react"),{})})}),children:h.jsx(b("CometAnimatedImagePickerCard.react"),{mediaWidth:j,onSelect:a,searchQuery:f,xstyle:i&&k.scrollableAreaForIE11})}),header:h.jsx(b("CometPickerSearchBox.react"),{searchQuery:f,setSearchQuery:e},0)}})}}),null);
__d("XUFICommentGIFPreprocessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/comment/gif_preprocess/",{})}),null);
__d("CometUFIGIFPickerPopover.stable.react",["CometPopover.react","CometUFIAnimatedImagePickerCard.react","XUFICommentGIFPreprocessController","cometAsyncFetch","promiseDone","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){var c=a.onClose,d=a.onComposerStateChange;a=h.useCallback(function(a){b("promiseDone")(b("cometAsyncFetch")(b("XUFICommentGIFPreprocessController").getURIBuilder().getURI().toString(),{data:{gif_url:a.source.url},method:"POST"})),d(function(b){return{attachment:{__type:"GIF",data:a}}}),c()},[c,d]);return h.jsx(b("CometPopover.react"),{withArrow:!0,children:h.jsx(b("CometUFIAnimatedImagePickerCard.react"),{onClose:c,onSelect:a})})}}),null);