if (self.CavalryLogger) { CavalryLogger.start_js(["LK7HD"]); }

__d("CometSaveToggle_savable.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometSaveToggle_savable",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_saved_state",storageKey:null}],type:"Savable",abstractKey:"__isSavable"};e.exports=a}),null);
__d("CometSaveAddToCollectionDialogQuery$Parameters",[],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:"3540838922613034",metadata:{},name:"CometSaveAddToCollectionDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("useContentCollectionAddSavablesMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"collection_title",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useContentCollectionAddSavablesMutation",selections:[{alias:null,args:b,concreteType:"ContentCollectionAddSavablesResponsePayload",kind:"LinkedField",name:"content_collection_add_savables",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"added_content_collection_items",plural:!0,selections:[c],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content_collection",plural:!1,selections:[c,d,{args:null,kind:"FragmentSpread",name:"CometSaveLeftRailListItem_collection"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useContentCollectionAddSavablesMutation",selections:[{alias:null,args:b,concreteType:"ContentCollectionAddSavablesResponsePayload",kind:"LinkedField",name:"content_collection_add_savables",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"added_content_collection_items",plural:!0,selections:[e,c],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"content_collection",plural:!1,selections:[e,c,d,{kind:"TypeDiscriminator",abstractKey:"__isContentCollection"},{alias:null,args:[{kind:"Literal",name:"height",value:48},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:48}],concreteType:"Image",kind:"LinkedField",name:"collection_thumbnail_image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"3074286695993733",metadata:{},name:"useContentCollectionAddSavablesMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("XCometSaveDashboardControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f){a=b("jsRouteBuilder")("/saved/",Object.freeze({unlisted_only:!1}),void 0);c=a;e.exports=c}),null);
__d("CometSaveToastUtil",["fbt","CometLink.react","XCometSaveDashboardControllerRouteBuilder","react"],(function(a,b,c,d,e,f,g){"use strict";f.getAddToCollectionToast=a;var h,i=h||b("react");function a(a,c,d){d=(d=d)!=null?d:a!==null?b("XCometSaveDashboardControllerRouteBuilder").buildURL({list_id:a}):null;return c!=null?g._("Saved to {=[Name of collection]}",[g._param("=[Name of collection]",i.jsx(b("CometLink.react"),{href:d,children:g._("{Name of collection}",[g._param("Name of collection",i.jsx("b",{children:c}))])}))]):g._("Added to collection")}}),null);
__d("CometSaveAddToCollectionDialog.entrypoint",["CometSaveAddToCollectionDialogQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(a){a=a.collectionItemID;return{queries:{dialogViewerQueryRef:{parameters:b("CometSaveAddToCollectionDialogQuery$Parameters"),variables:{collectionItemID:a,scale:b("WebPixelRatio").get()}}}}},root:b("JSResourceForInteraction")("CometSaveAddToCollectionDialog.react").__setRef("CometSaveAddToCollectionDialog.entrypoint")};e.exports=a}),null);
__d("useAddToCollectionFlow",["CometSaveAddToCollectionDialog.entrypoint","react","useCometEntryPointDialog"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){a=b("useCometEntryPointDialog")(b("CometSaveAddToCollectionDialog.entrypoint"),{collectionItemID:a});var c=a[0];a=a[1];var d=h.useCallback(function(a,b){c(a,b)},[c]);return[d,a]}}),null);
__d("CometSaveMutationHelper",["CometRelay"],(function(a,b,c,d,e,f){"use strict";f.addToCollection=a;f.addToGroupCollection=c;f.findNodeIDForSavable=d;f.addCollectionToConnections=e;f.removeCollectionFromConnections=j;var g="CometSaveCollectionAllItems_collection_items",h="CometSaveGroupCollectionAllItems_items",i=[{key:"CometSaveLeftRail_saver_content_collections",use_case:"SAVE_DEFAULT"},{key:"CometSaveSelectCollectionList_saver_content_collections",use_case:"SAVE_BOTTOM_SHEET"},{key:"SaveSelectCollection_saver_content_collections",use_case:"SAVE_BOTTOM_SHEET"}];function a(a,c,d){c=a.get(c);if(!c)return;var e=b("CometRelay").ConnectionHandler.getConnection(c,g);if(!e)return;d.forEach(function(c){if(c){c=b("CometRelay").ConnectionHandler.createEdge(a,e,c,"SaverInfoSaverContentCollectionsEdge");b("CometRelay").ConnectionHandler.insertEdgeBefore(e,c)}})}function c(a,c,d){c=a.get(c);if(!c)return;c=b("CometRelay").ConnectionHandler.getConnection(c,h);if(!c)return;a=b("CometRelay").ConnectionHandler.createEdge(a,c,d,"ContentCollectionItemsEdge");b("CometRelay").ConnectionHandler.insertEdgeBefore(c,a)}function d(a,b){a=(a=a.getLinkedRecords("edges"))!=null?a:[];for(var c=0;c<a.length;c++){var d=a[c];d=d&&d.getLinkedRecord("node");var e=d&&d.getLinkedRecord("savable");e=e&&e.getDataID();d=d&&d.getDataID();if(b===e)return d}}function e(a,c,d){i.forEach(function(e){var f=e.key;e=e.use_case;f=b("CometRelay").ConnectionHandler.getConnection(d,f,{use_case:e});if(f==null)return;b("CometRelay").ConnectionHandler.insertEdgeBefore(f,b("CometRelay").ConnectionHandler.createEdge(a,f,c,"SaverInfoSaverContentCollectionsEdge"))})}function j(a,c){i.forEach(function(d){d=d.key;d=b("CometRelay").ConnectionHandler.getConnection(a,d);if(d==null)return;b("CometRelay").ConnectionHandler.deleteNode(d,c)})}}),null);
__d("CometSaveStoryMutationHelper",[],(function(a,b,c,d,e,f){"use strict";f.updateStoriesSaveState=a;f.updateSavablesSaveState=b;function a(a,b,c){b&&b.forEach(function(b){b=a.get(b);if(b!=null){b=b.getLinkedRecord("save_info");b!=null&&b.setValue(c,"viewer_save_state")}})}function b(a,b,c){b&&b.forEach(function(b){b=a.get(b);b!=null&&b.setValue(c,"viewer_saved_state")})}}),null);
__d("CometSaveLoggingContext",["react"],(function(a,b,c,d,e,f){"use strict";var g;a=g||b("react");c=a.createContext({collectionID:null,referrer:null,surface:"dashboard",surfaceGraphQL:"DASHBOARD",surfaceGraphQL_legacy:"dashboard"});e.exports=c}),null);
__d("useCometSaveLoggingContext",["CometSaveLoggingContext","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(){return h.useContext(b("CometSaveLoggingContext"))}}),null);
__d("useContentCollectionAddSavablesMutation",["CometRelay","CometSaveMutationHelper","CometSaveStoryMutationHelper","WebPixelRatio","createUseMutation_DEPRECATED","promiseDone","react","unrecoverableViolation","useCometSaveLoggingContext","useContentCollectionAddSavablesMutation.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=h||b("react");c=g!==void 0?g:g=b("useContentCollectionAddSavablesMutation.graphql");d=function(a){return function(c){var d=a.savable_ids;b("CometSaveStoryMutationHelper").updateSavablesSaveState(c,d,"SAVED");d=c.getRootField("content_collection_add_savables");if(d==null)return;d=d.getLinkedRecord("content_collection");if(d==null)return;if(a.content_collection_id!==d.getValue("id")){var e=c.get(b("CometRelay").VIEWER_ID);if(e==null)return;e=e.getLinkedRecord("saver_info");if(e==null)return;b("CometSaveMutationHelper").addCollectionToConnections(c,d,e)}}};var j=b("createUseMutation_DEPRECATED")(c,void 0,d,d);function a(a,c){a=a||{};var d=a.onError,e=a.onSuccess,f=(a=c)!=null?a:b("useCometSaveLoggingContext")().surfaceGraphQL,g=j();return i.useCallback(function(a){var c=a.collectionID,h=a.collectionTitle,i=a.mechanism,j=a.overrideSaveDestinationLink;a=a.savableIDs;if(a==null)throw b("unrecoverableViolation")("savableIDs not provided to add savables mutation","saved_for_later");b("promiseDone")(g({collection_title:h,content_collection_id:c,savable_ids:a,save_mechanism:i,save_surface:f},{scale:b("WebPixelRatio").get()}),function(a){a=(a=a.content_collection_add_savables)==null?void 0:a.content_collection;e&&e(a==null?void 0:a.id,a==null?void 0:a.collection_title,j)},d)},[g,f,d,e])}}),null);
__d("useSaveMutation",["JSResourceForInteraction","promiseDone","react","unrecoverableViolation","useCometSaveLoggingContext"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react"),i=b("JSResourceForInteraction")("CometSaveMutation").__setRef("useSaveMutation");function a(a,c){var d=a.mechanism,e=a.savableID;a=a.surface;var f=b("useCometSaveLoggingContext")().surfaceGraphQL_legacy,g=(a=a)!=null?a:f;a=c||{};var j=a.onFailure,k=a.onSuccess;return h.useCallback(function(){if(e==null)throw b("unrecoverableViolation")("savableID not provided to save mutation","saved_for_later");b("promiseDone")(i.load().then(function(a){a({mechanism:d,node_id:e,surface:g},{onFailure:j,onSuccess:k})}))},[d,e,g,k,j])}}),null);
__d("useUnsaveMutation",["JSResourceForInteraction","promiseDone","react","unrecoverableViolation","useCometSaveLoggingContext"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react"),i=b("JSResourceForInteraction")("CometUnsaveMutation").__setRef("useUnsaveMutation");function a(a,c){var d=a.mechanism,e=a.savableID;a=a.surface;var f=b("useCometSaveLoggingContext")().surfaceGraphQL_legacy,g=(a=a)!=null?a:f;a=c||{};var j=a.onFailure,k=a.onSuccess;return h.useCallback(function(){if(e==null)throw b("unrecoverableViolation")("savableID not provided to unsave mutation","saved_for_later");b("promiseDone")(i.load().then(function(a){a({mechanism:d,node_id:e,surface:g},{onFailure:j,onSuccess:k})}))},[e,d,g,j,k])}}),null);
__d("CometSaveToggle.react",["fbt","CometRelay","CometSaveToastUtil","CometSaveToggle_savable.graphql","react","requireDeferred","useAddToCollectionFlow","useContentCollectionAddSavablesMutation","useSaveMutation","useUnsaveMutation"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i,j=i||b("react"),k=b("requireDeferred")("cometPushToast"),l=h!==void 0?h:h=b("CometSaveToggle_savable.graphql");function a(a){var c=a.SaveComponent,d=a.UnsaveComponent,e=a.mechanism,f=a.onUnsaveCallback,h=a.overrideSaveDestinationLink,i=a.savable,n=a.saveToCollectionID;a=a.surface;i=b("CometRelay").useFragment(l,i);var o=i.id,p=b("useAddToCollectionFlow")(),q=p[0],r=b("useSaveMutation")({mechanism:e,savableID:o,surface:a});p=j.useCallback(function(a,b,c){m(b,a,c)},[]);var s=b("useContentCollectionAddSavablesMutation")({onSuccess:p});p=b("useUnsaveMutation")({mechanism:e,savableID:o,surface:a});f=(a=f)!=null?a:p;var t=j.useCallback(function(a){if(a===!0)return;k.onReady(function(a){a.cometPushSimpleToast(g._("Saved"))})},[]);if(o==null)return null;switch(i.viewer_saved_state){case"SAVED":return d(f);case"NOT_SAVED":return c(function(){n!=null?s({collectionID:n,mechanism:e,overrideSaveDestinationLink:h,savableIDs:[o]}):(r(),q({mechanism:e,onClose:t,savableID:o},t))});case"NOT_SAVABLE":default:return null}}function m(a,c,d){k.onReady(function(e){e.cometPushSimpleToast(b("CometSaveToastUtil").getAddToCollectionToast(c,a,d),4e3)})}}),null);